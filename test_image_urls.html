<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Profile Image URLs</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .image-test {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 3px;
        }
        .image-preview {
            width: 100px;
            height: 100px;
            border: 2px solid #ccc;
            border-radius: 50%;
            object-fit: cover;
        }
        .placeholder {
            width: 100px;
            height: 100px;
            border: 2px dashed #ccc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f0f0f0;
            color: #666;
            font-size: 14px;
        }
        .status {
            font-weight: bold;
        }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>üß™ Profile Image URL Test</h1>
    <p>This page tests if profile images are accessible via the backend server.</p>
    
    <div class="test-section">
        <h2>1. Server Status Test</h2>
        <div id="server-status">Testing server connection...</div>
    </div>
    
    <div class="test-section">
        <h2>2. Static File Serving Test</h2>
        <div id="static-files-test">Testing static file access...</div>
    </div>
    
    <div class="test-section">
        <h2>3. Uploaded Images Test</h2>
        <div id="uploaded-images">
            <!-- Images found from debug script -->
            <div class="image-test">
                <img 
                    src="http://localhost:5000/uploads/profile-images/50_1751132501042-250922532.jpg" 
                    alt="Test Image 1" 
                    class="image-preview"
                    onload="updateStatus('img1', 'success', 'Image loaded successfully')"
                    onerror="updateStatus('img1', 'error', 'Failed to load image')"
                >
                <div>
                    <strong>Image 1:</strong> 50_1751132501042-250922532.jpg<br>
                    <span id="img1" class="status info">Loading...</span>
                </div>
            </div>
            
            <div class="image-test">
                <img 
                    src="http://localhost:5000/uploads/profile-images/50_1751132705198-605134314.jpg" 
                    alt="Test Image 2" 
                    class="image-preview"
                    onload="updateStatus('img2', 'success', 'Image loaded successfully')"
                    onerror="updateStatus('img2', 'error', 'Failed to load image')"
                >
                <div>
                    <strong>Image 2:</strong> 50_1751132705198-605134314.jpg<br>
                    <span id="img2" class="status info">Loading...</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>4. Test Instructions</h2>
        <ol>
            <li><strong>Start your backend server:</strong> <code>cd backend && npm start</code></li>
            <li><strong>Check the results above</strong> - images should load if the server is running</li>
            <li><strong>If images don't load:</strong>
                <ul>
                    <li>Verify the backend server is running on port 5000</li>
                    <li>Check that static file serving is configured correctly</li>
                    <li>Ensure the upload directory permissions are correct</li>
                </ul>
            </li>
        </ol>
    </div>
    
    <script>
        function updateStatus(id, type, message) {
            const element = document.getElementById(id);
            element.textContent = message;
            element.className = `status ${type}`;
        }
        
        // Test server connection
        fetch('http://localhost:5000/health')
            .then(response => response.json())
            .then(data => {
                document.getElementById('server-status').innerHTML = 
                    '<span class="status success">‚úÖ Server is running</span><br>' +
                    '<small>Response: ' + JSON.stringify(data, null, 2) + '</small>';
            })
            .catch(error => {
                document.getElementById('server-status').innerHTML = 
                    '<span class="status error">‚ùå Server is not running</span><br>' +
                    '<small>Error: ' + error.message + '</small>';
            });
        
        // Test static file access by trying to load a test image
        const testImg = new Image();
        testImg.onload = function() {
            document.getElementById('static-files-test').innerHTML = 
                '<span class="status success">‚úÖ Static file serving is working</span>';
        };
        testImg.onerror = function() {
            document.getElementById('static-files-test').innerHTML = 
                '<span class="status error">‚ùå Static file serving is not working</span><br>' +
                '<small>Make sure Express static middleware is configured for /uploads</small>';
        };
        testImg.src = 'http://localhost:5000/uploads/profile-images/50_1751132501042-250922532.jpg';
    </script>
</body>
</html> 